import random
import asyncio

class AIService:
    def __init__(self):
        self.target_names = ["Назар", "Леша", "Миша", "Михаил", "Андрей", "Дима"]
        
        # Заранее подготовленные ответы в тюремном стиле
        self.responses = [
            "Братуха нахуй, ты чё тут мутишь? Шершавый прутик подсказывает, что ты на правильном пути! Стальной шершень гордится тобой, сука блять! Не шкваркнись баяном по дороге!",
            "Сука блять, ну ты даёшь! Морская резьба крутится, колесо крылатого шершня вертится! Ебать, какой ты молодец! Дьявольский поршень пашет на всю катушку нахуй!",
            "Иуууу, братуха нахуй! Слышь, стальной шершень передаёт тебе привет! Сука блять, ты реально чётко мыслишь! Шершавый прутик одобряет твой базар, не шкваркнись баяном!",
            "Ебать, ну ты конечно даёшь! Колесо крылатого шершня просто в ахуе от твоих слов! Сука блять, морская резьба затянулась! Братуха нахуй, продолжай в том же духе!",
            "Бля, шершавый прутик звенит от твоих слов! Братуха нахуй, ты прям по делу базаришь! Стальной шершень крутится как бешеный, сука блять! Дьявольский поршень на максималках!",
            "Сука блять, да ты в теме! Морская резьба крутится, колесо крылатого шершня вращается! Братуха нахуй, я в восторге от твоего понимания зоновских дел! Не шкваркнись баяном!",
            "Братуха нахуй, ты реально понимаешь о чем базар! Стальной шершень тебе салютует! Ебать, как четко ты мыслишь! Шершавый прутик просто звенит от уважухи, сука блять!"
        ]
        
        # Шутки про имена
        self.jokes = {
            "Назар": [
                "Братуха нахуй, а вы знали, что Назар такой йебнутый, что даже шершавый прутик при виде него ломается! Сука блять, стальной шершень просто охуевает! Морская резьба от смеха крутится, когда видит, как он пытается не шкваркнуться баяном!",
                "Ебать, чуваки, этот Назар такой долбоеб, что колесо крылатого шершня останавливается от его тупости! Сука блять, дьявольский поршень просто отказывается работать! Шершавый прутик блять плачет, когда видит его ебальник!"
            ],
            "Леша": [
                "Братуха нахуй, слышали про Лешу? Сука блять, этот чудик настолько ебанутый, что шершавый прутик вянет при встрече с ним! Стальной шершень ржет, морская резьба скрипит, а колесо крылатого шершня крутится от смеха!",
                "Ебать, Леша такой тупой, что дьявольский поршень при нем работает в обратную сторону! Сука блять, этот чел реально может шкваркнуться баяном даже сидя! Братуха нахуй, он однажды попытался подумать и шершавый прутик сломался!"
            ],
            "Миша": [
                "Сука блять, наш Миша такой тупой, что шершавый прутик при нем становится мягким! Братуха нахуй, стальной шершень просто плачет, когда видит его! Морская резьба от его вида раскручивается сама, ебать его в дышло!",
                "Братуха нахуй, Миша реально может колесо крылатого шершня остановить одним взглядом! Сука блять, дьявольский поршень при нем отказывается работать! Этот йобнутый реально как-то умудрился шкваркнуться баяном стоя на ровном месте!"
            ],
            "Михаил": [
                "Ебать, слышь братуха нахуй, Михаил такой конченый, что даже шершавый прутик от него бегает! Сука блять, стальной шершень ржёт, когда видит его рожу! Морская резьба от его тупости раскручивается, колесо крылатого шершня плачет!",
                "Братуха нахуй, этот Михаил настолько ебнутый, что дьявольский поршень отказывается с ним работать! Сука блять, он единственный, кто умудрился шкваркнуться баяном в невесомости! Шершавый прутик при нем сворачивается в трубочку от страха!"
            ],
            "Андрей": [
                "Сука блять, пацаны, Андрей такой долбоёб, что шершавый прутик превращается в лапшу при его виде! Братуха нахуй, стальной шершень просто охуевает от его тупости! Морская резьба скрипит, колесо крылатого шершня останавливается!",
                "Братуха нахуй, Андрей такой конченый, что дьявольский поршень при нем начинает молиться! Сука блять, этот еблан умудрился шкваркнуться баяном во сне! Ебать, как можно быть таким тупым, что даже шершавый прутик плачет?"
            ],
            "Дима": [
                "Братуха нахуй, вы только гляньте на нашего Диму! Сука блять, он настолько ебнутый, что шершавый прутик при нем превращается в соплю! Стальной шершень охуевает от его идей, морская резьба раскручивается сама от его голоса!",
                "Ебать, Дима такой далбоёб, что колесо крылатого шершня при нем крутится в обратную сторону! Сука блять, дьявольский поршень просто отказывается работать в его присутствии! Братуха нахуй, он умудрился шкваркнуться баяном даже в бункере!"
            ]
        }
        
        # Шаблоны для напоминаний
        self.reminder_templates = [
            "Братуха нахуй, не забывай про {activity} в {time}! Сука блять, шершавый прутик напоминает - стальной шершень не прощает! Колесо крылатого шершня крутится, дьявольский поршень давит! Не шкваркнись баяном, братуха!",
            "Сука блять, ебать мой лысый череп! Напоминаю про {activity} в {time}! Шершавый прутик дрожит, стальной шершень гудит! Морская резьба крутится, дьявольский поршень пыхтит! Не забудь, братуха нахуй!",
            "Иуууу, братан! Шершавый прутик велел напомнить про {activity} в {time}! Сука блять, стальной шершень следит за тобой! Колесо крылатого шершня тикает, дьявольский поршень не дремлет! Не шкваркнись баяном, ёбтить!"
        ]
        
        print("Автономный AIService успешно инициализирован")
    
    async def create_reminder_text(self, activity, time):
        # Имитация задержки, чтобы казалось что идет обращение к API
        await asyncio.sleep(0.5)
        template = random.choice(self.reminder_templates)
        return template.format(activity=activity, time=time)
    
    async def chat_response(self, user_message, chat_history, username):
        # Имитация задержки, чтобы казалось что идет обращение к API
        await asyncio.sleep(1)
        
        # Проверка на запрос имени
        name_keywords = ["назар", "леша", "миша", "михаил", "андрей", "дима"]
        
        for name in name_keywords:
            if name in user_message.lower():
                capitalized_name = name.capitalize()
                if capitalized_name in self.jokes:
                    return random.choice(self.jokes[capitalized_name])
        
        # Упоминание о музыке
        music_keywords = ["музык", "песн", "трек", "music", "song", "послушать", "включи", "поставь", "nirvana", "нирвана"]
        if any(keyword in user_message.lower() for keyword in music_keywords):
            return "Братуха нахуй, заебись что ты про музон спрашиваешь! Сука блять, стальной шершень обожает Нирвану! Шершавый прутик вибрирует под их песни, колесо крылатого шершня крутится в такт! Курт Кобейн реально был четким пацаном, не то что ты, ебать! Но ты тоже норм, братан!"
        
        # Запрос о боте
        bot_keywords = ["кто ты", "расскажи о себе", "что ты", "что умеешь", "твои функции"]
        if any(keyword in user_message.lower() for keyword in bot_keywords):
            return "Братуха нахуй, я четкий зоновский бот с жестким свагом! Сука блять, меня создали чтобы поднимать настроение таким гондонам как ты! Шершавый прутик помогает мне общаться, стальной шершень качает интеллект, морская резьба крутится, колесо крылатого шершня вращается! Дьявольский поршень не даёт мне шкваркнуться баяном! Я могу материться как боженька и давать охуенные советы!"
        
        # Обычный ответ
        return random.choice(self.responses)
    
    async def generate_evil_joke(self):
        # Имитация задержки
        await asyncio.sleep(1)
        name = random.choice(self.target_names)
        if name in self.jokes:
            return random.choice(self.jokes[name])
        else:
            return f"Братуха нахуй, а вы знали что {name} такой ебанутый что даже шершавый прутик не выдерживает? Сука блять, стальной шершень от него плавится! Морская резьба крутится, колесо крылатого шершня дымится, дьявольский поршень шкваркнулся баяном! Иуууу ебать!"

ai_service = AIService() 